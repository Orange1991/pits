/** @Copyright sfg1991@163.com */var eventsMap={"mousedown":"touchstart","mouseup":"touchend"};var listen=function(c,b,a){if(c){if(c.addEventListener){c.addEventListener(b,a);if(eventsMap[b]){c.addEventListener(eventsMap[b],a)}}}};var addClass=function(d,e){if(!d||!e){return}var b=d.className;if(!b){d.className=e}else{var a=b.split(" ").filter(function(c){return !!c});if(a.indexOf(e)==-1){a.push(e);d.className=a.join(" ")}}};var removeClass=function(e,f){if(!e||!e.className||!f){return}var d=e.className;if(d.indexOf(f)==-1){return}else{var b=d.split(" ").filter(function(c){return !!c});var a=b.indexOf(f);if(a!=-1){b.splice(a,1);e.className=b.join(" ")}}};var renderCenterRect=function(c,a,b){if(!c){return}c.style.width=a+"px";c.style.height=a+"px";c.style.left=(b-a)/2+"px"};var renderRect=function(b,a){if(!b){return}b.style.width=a+"px";b.style.height=a+"px"};var renderLeft=function(b,a){b&&(b.style.left=a+"px")};var renderRight=function(b,a){b&&(b.style.right=a+"px")};var renderTop=function(b,a){b&&(b.style.top=a+"px")};var renderHeight=function(b,a){b&&(b.style.height=a+"px")};var renderWidth=function(b,a){b&&(b.style.width=a+"px")};var init=function(){var a=document.body.clientWidth;var J=document.body.clientHeight;var S=a<J?a:J;var e=S/5;var L=e*0.2;var b=e;(L>20)&&(L=20);var f=L/2;var ac=e*2;var ad=f;document.body.className=a>=J?"horizontal":"vertical";var v=document.querySelector("#main-container");var H=document.querySelector("#pit-one");var al=document.querySelector("#pit-two");var ae=document.querySelector("#filling-one");var n=document.querySelector("#filling-two");var ab=document.querySelector("#player");var U=document.querySelector("#award");var c=document.querySelector("#score");var aa=document.querySelector("#score-container");var q=document.querySelector("#result-container");var X=document.querySelector("#result-score");var M=document.querySelector("#result-msg");var O=document.querySelector("#logo");var g=document.querySelector("#nav-container");var C=H;var r=ae;var w=al;var j=n;var V=false;var ah=false;var P=0;var R;var x=200;var af={THROUGH:0,TOO_WIDE:1,TOO_HIGH:2,BLOCK:3};var ak=["太远了，过不去","摔死啦","撞墙啦"];var Z=5;var T=10;var m=5;var p=10;var aj="hide";var A="transparent";var G="smooth";var am="emphasized";var k=function(){addClass(document.querySelector("#about-container"),"show")};var Y=function(){removeClass(document.querySelector("#about-container"),"show")};var z=function(){addClass(document.querySelector("#intro-container"),"show")};var d=function(){removeClass(document.querySelector("#intro-container"),"show")};var N=function(){i();addClass(O,A);addClass(g,A);setTimeout(function(){addClass(O,aj);addClass(g,aj)},x)};var i=function(){V=false;P=0;ad=f;R&&clearInterval(R);E();c.innerHTML=P;removeClass(aa,aj);removeClass(aa,A);removeClass(r,aj);renderTop(r,20);renderCenterRect(r,ad,a);renderCenterRect(C,b,a);B();setTimeout(function(){removeClass(r,G);V=true},x)};var ai=function(){if(V){V=false;ah=true;R&&clearInterval(R);R=setInterval(function(){ad<ac&&(ad+=1);renderCenterRect(r,ad,a)},10)}};var D=function(ap){if(ah&&R){ap.preventDefault();ah=false;clearInterval(R);R=null;addClass(r,G);var an=J*0.5-ad;var ao=l(ad,b);if(ao){an+=b}renderTop(r,an);setTimeout(function(){removeClass(r,G);y(ao)},x)}};var y=function(an){if(an){switch(ag(ad,b)){case af.THROUGH:renderLeft(ab,a*0.75-ab.clientWidth/2);setTimeout(function(){addClass(U,G);renderRight(U,20+c.clientWidth);renderTop(U,20-J/2);setTimeout(function(){removeClass(U,G);addClass(U,aj);addClass(c,am);c.innerHTML=++P;setTimeout(function(){removeClass(c,am)},x);s()},x)},x);break;case af.TOO_WIDE:renderLeft(ab,(a-b)/2);setTimeout(function(){renderTop(ab,b-ab.clientHeight);setTimeout(function(){K(af.TOO_WIDE)},x)},x);break;case af.TOO_HIGH:renderLeft(ab,(a-b)/2);setTimeout(function(){renderTop(ab,b-ad-ab.clientHeight);setTimeout(function(){K(af.TOO_HIGH)},x)},x);break}}else{renderLeft(ab,(a-ad)/2-ab.clientWidth);setTimeout(function(){K(af.BLOCK)},x)}};var s=function(){u();h();t();I();F()};var u=function(){removeClass(j,G);removeClass(w,G);removeClass(U,G);removeClass(U,aj);ad=f;b=o(L,e);B();renderRect(j,ad);renderRect(w,b);renderTop(j,20);renderLeft(j,a+ad);renderLeft(w,a+b);renderRight(U,-(a/2));renderTop(U,-U.clientHeight)};var h=function(){renderLeft(C,-C.clientWidth);renderLeft(r,-r.clientWidth);renderLeft(ab,a*0.2)};var t=function(){addClass(j,G);addClass(w,G);addClass(U,G);renderLeft(j,(a-ad)/2);renderLeft(w,(a-b)/2);renderRight(U,a*0.2);setTimeout(function(){removeClass(r,G);removeClass(j,G)},x)};var I=function(){var an=j;j=r;r=an;an=w;w=C;C=an};var F=function(){setTimeout(function(){V=true},x*2)};var l=function(an,ao){return an<=ao};var ag=function(an,aq){var ap=aq-an;var ao=ap/2;if(ao>m){return af.TOO_WIDE}if(ap>p){return af.TOO_HIGH}return af.THROUGH};var o=function(an,ap){var ao=parseInt(an+(ap-an)*Math.random());return ao>ap?ap:ao<an?an:ao};var K=function(an){an=parseInt(an);var ao="失败啦";if(an>=1&&an<=3){ao=ak[an-1]}X.innerHTML=P;M.innerHTML=ao;removeClass(q,aj);addClass(q,G);removeClass(q,A)};var Q=function(){addClass(q,A);setTimeout(function(){addClass(q,aj)},x);i()};var W=function(){addClass(r,A);addClass(q,A);addClass(aa,A);setTimeout(function(){addClass(r,aj);addClass(q,aj);addClass(aa,aj);removeClass(O,aj);removeClass(g,aj);removeClass(O,A);removeClass(g,A);renderHeight(C,J*0.1);renderWidth(C,a*0.2);renderLeft(C,a*0.4);E()},x)};var E=function(){renderLeft(ab,a*0.2);renderTop(ab,-ab.clientHeight)};var B=function(){m=b*0.2;m<Z&&(m=Z);p=b*0.3;p<T&&(p=T)};listen(document.querySelector("#nav-about"),"click",k);listen(document.querySelector("#close-about"),"click",Y);listen(document.querySelector("#nav-intro"),"click",z);listen(document.querySelector("#close-intro"),"click",d);listen(document.querySelector("#nav-start"),"click",N);listen(document.querySelector("#replay"),"click",Q);listen(document.querySelector("#home"),"click",W);listen(v,"mousedown",ai);listen(v,"mouseup",D)};